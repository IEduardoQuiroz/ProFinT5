<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Modelo T5 - Opciones</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .hidden { display: none; }
    </style>
</head>
<body class="bg-gray-100 flex flex-col justify-center items-center h-screen">

<!-- Pantalla de carga inicial -->
<div id="loadingScreen" class="flex flex-col items-center justify-center">
    <h1 class="text-3xl font-bold mb-4">Cargando Modelo T5...</h1>
    <p class="text-center max-w-lg">El modelo T5 (Text-to-Text Transfer Transformer) es un potente modelo de inteligencia artificial desarrollado por Google que permite realizar tareas como resumir textos, traducir idiomas, generar y responder preguntas, y hasta crear imágenes.</p>
    <div class="mt-4 animate-spin rounded-full h-10 w-10 border-t-4 border-b-4 border-blue-500"></div>
</div>

<!-- Página principal (inicialmente oculta) -->
<div id="mainPage" class="hidden text-center">
    <h1 class="text-4xl font-bold mb-6">Selecciona una opción</h1>
    <div class="space-y-4">
        <button onclick="enviar('resumir')" class="px-6 py-2 bg-blue-500 text-white rounded hover:bg-blue-600">1. Resumir</button>
        <button onclick="enviar('traducir')" class="px-6 py-2 bg-green-500 text-white rounded hover:bg-green-600">2. Traducir</button>
        <button onclick="enviar('preguntar')" class="px-6 py-2 bg-yellow-500 text-white rounded hover:bg-yellow-600">3. Hacer una pregunta</button>
        <button onclick="enviar('generar_preguntas')" class="px-6 py-2 bg-purple-500 text-white rounded hover:bg-purple-600">4. Generar preguntas automáticamente</button>
        <button onclick="enviar('generar_imagen')" class="px-6 py-2 bg-indigo-500 text-white rounded hover:bg-indigo-600">5. Generar imagen</button>
    </div>
    <div class="mt-6">
        <textarea id="entrada" rows="4" class="w-full max-w-md p-2 border rounded" placeholder="Escribe aquí el texto o prompt..."></textarea>
        <input id="contexto" class="w-full max-w-md p-2 mt-2 border rounded" placeholder="(Opcional) Contexto para preguntas">
        <button onclick="procesar()" class="mt-4 px-6 py-2 bg-black text-white rounded">Procesar</button>
    </div>
    <div id="resultado" class="mt-6 text-left max-w-xl"></div>
</div>

<script>
    let tipo = '';

    function enviar(seleccion) {
        tipo = seleccion;
        document.getElementById('resultado').innerText = `Opción seleccionada: ${tipo}`;
    }

    function procesar() {
        const texto = document.getElementById('entrada').value;
        const contexto = document.getElementById('contexto').value;

        fetch('/procesar', {
            method: 'POST',
            headers: {'Content-Type': 'application/json'},
            body: JSON.stringify({ tipo, texto, contexto })
        })
        .then(res => res.json())
        .then(data => {
            const resDiv = document.getElementById('resultado');
            if (data.resultado) resDiv.innerText = data.resultado;
            else if (data.preguntas) resDiv.innerHTML = '<ul>' + data.preguntas.map(p => `<li>• ${p}</li>`).join('') + '</ul>';
            else if (data.imagen) resDiv.innerHTML = `<img src=\"/${data.imagen}\" class=\"mt-4 rounded shadow\">`;
        });
    }

    window.addEventListener('load', function() {
        setTimeout(function() {
            document.getElementById('loadingScreen').classList.add('hidden');
            document.getElementById('mainPage').classList.remove('hidden');
        }, 3000);
    });
</script>

</body>
</html>
